<!DOCTYPE html>
<html>
<head>
<title>JS_DOM_개요</title>
<script>
/*
1 DOM 객체 (DOM, Document Object Model)
    1.1 문서 객체 모델(DOM)이란?
        웹 브라우저는 서버로부터 전달받는 Resource를 읽고 HTML 태그들을 분석하고 화면에 표시합니다.
            이때 웹 브라우저가 HTML을 분석하고 표시하는 방식을 문서 객체 모델( DOM : Document Object Model ) 이라고 합니다.

    1.2 DOM으로 할수 있는 작업
        - HTML 요소나 속성 추가, 변경, 제거 
        - CSS 스타일을 변경
        - HTML 이벤트를 추가

    1.3 사용법
        개요
            DOM 객체 선택 -> 추가, 변경, 삭제 
        
        1.3.1 DOM 객체 선택
            1.3.1.1 개별 선택
                1. document.getElementById()
                    DOM에서 특정 id값을 가진 엘리먼트를 반환합니다. 값이 없을 경우 null을 반환합니다. 
                        만약 id값이 여러개일 경우 첫 번째 id값을 반환합니다. 
                    let div_1 = document.getElementById("div_1");
                    
                2. document.querySelector()
                    HTML5 부터 사용가능
                    css 선택자를 기준으로 제일 첫 번째 엘리먼트를 반환합니다.
                    let div_li = document.querySelector(".div_li");

            1.3.1.2 다중선택
                1. document.getElementsByClassName()
                    특정 클래스명을 가진 엘리먼트들을 NodeList로 반환합니다.
                    let board_div = document.getElementsByClassName(".board_div");

                2. document.getElementsByName()
                    name에 명시된 조건에 맞는 모든 값들을 live NodeList로 반환합니다. 
                    index로 접근이 가능하며 length속성을 가집니다.
                    let board_title = document.getElementsByName("board_title");

                3. document.getElementsByTagName()
                    특정 태그명을 가진 엘리먼트들을 HTMLCollection을 반환합니다.
                    let input_tags = document.getElementsByTagName("input");

                4. document.querySelectorAll()
                    css 선택자에 맞는 모든 엘리먼트를 NodeList로 반환합니다.
                    let div_li = document.querySelectorAll(".div_li");
                    
            1.3.1.3 HTML 객체 집합(object collection)을 이용한 선택
                HTML DOM에서 제공하는 객체 집합(object collection)을 이용하여 HTML 요소를 선택할 수 있습니다.
                예제
                    let title = document.title; // <title> 요소를 선택함.

                종류
                    document.anchors	            name 속성을 가지는 <a>요소를 모두 반환함.	
                    document.applets	            applet 요소를 모두 반환함. (HTML5에서 제외됨)	
                    document.body	                <body>요소를 반환함.	
                    document.cookie	                HTML 문서의 쿠키(cookie)를 반환함.	
                    document.domain	                HTML 문서가 위치한 서버의 도메인 네임(domain name)을 반환함.
                    document.forms	                <form>요소를 모두 반환함.	
                    document.images	                <img>요소를 모두 반환함.	
                    document.links	                href 속성을 가지는 <area>요소와 <a>요소를 모두 반환함.	
                    document.referrer	            링크(linking)되어 있는 문서의 URI를 반환함.	
                    document.title	                <title>요소를 반환함.	
                    document.URL	                HTML 문서의 완전한 URL 주소를 반환함.	
                    document.baseURI	            HTML 문서의 절대 URI(absolute base URI)를 반환함.	
                    document.doctype	            HTML 문서의 문서 타입(doctype)을 반환함.	
                    document.documentElement        <html>요소를 반환함.	
                    document.documentMode           웹 브라우저가 사용하고 있는 모드를 반환함.	
                    document.documentURI            HTML 문서의 URI를 반환함.	
                    document.domConfig	            HTML DOM 설정을 반환함. (더는 사용하지 않음)	
                    document.embeds	                <embed>요소를 모두 반환함.	
                    document.head	                <head>요소를 반환함.	
                    document.implementation         HTML DOM 구현(implementation)을 반환함.	
                    document.inputEncoding          HTML 문서의 문자 인코딩(character set) 형식을 반환함.	
                    document.lastModified           HTML 문서의 마지막 갱신 날짜 및 시간을 반환함	
                    document.readyState             HTML 문서의 로딩 상태(loading status)를 반환함.	
                    document.scripts	            <script>요소를 모두 반환함.	
                    document.strictErrorChecking    오류의 강제 검사 여부를 반환함.	

        1.3.2 DOM 객체 생성, 추가, 수정 및 출력, 삭제
            1. DOM 객체 생성, 
                document.createElement(HTML요소)

            2. DOM 객체 추가 
                appendChild()        
                insertBefore() 
                    
            3. DOM 객체 출력 및 수정
                3.1 write
                3.2 innerHTML 
                    XSS 취약점 존재
                3.3 insertAdjacentHTML
                    innerHTML의 대안
                        참고 (https://developer.mozilla.org/ko/docs/Web/API/Element/insertAdjacentHTML)
                3.4 innerText
                3.5 textContent
                    권장
                        참고(https://developer.mozilla.org/ko/docs/Web/API/Node/textContent)

            4. 속성 변경
                4.1 CSS 스타일 변경
                    요소.style.color
                    요소.style.fontSize
                        font-size 처럼 글자 사이에 "-"이 있는경우 "-"뒤 첫글자를 대문자로 치환
        
                4.2 속성값 변경
                    1 일반 속성 변경
                        getAttribute() 
                            - 어트리뷰트 값을 가져온다.
                        hasAttribute() 
                            - 어트리뷰트 값을 가지고 있는지 검사한다.
                        setAttribute() 
                            - 어트리뷰트에 값을 대입한다.                            
                        removeAttribute() 
                            - 어트리뷰트를 제거한다.

                    2 class 속성 변경
                        className 
                            class 네임 지정
                        classList
                            add
                                class 추가
                            remove
                                class 제거
                            item
                                여려개 class 순번 선택
                            toggle
                                class toggle(반복)
                    
            5. DOM 객체 삭제
                removeChild()

        1.3.3
            HTML 이벤트 핸들러
               03_JS_10_02_DOM_이벤트_개요.html
 
*/
</script>
</head>
<body>
<h3>JS_DOM_개요</h3>   
<hr>
<p id="test01" class="test01_class" name="test01">test01test01</p>
<script>
/*nodelist, htmlcollection 차이
    https://www.w3schools.com/js/js_htmldom_nodelist.asp
        A NodeList object is almost the same as an HTMLCollection object.
        
    NodeList와 HTMLCollection 모두 DOM인터페이스로 엘리먼트의 집합을 말합니다. 
        둘다 배열 메소드를 지원하지는 않습니다. 차이점이 있다면 HTMLCollection은 노드의 집합이며 DOM의 변화를 반영합니다.
        
    NodeList로 반환된 것은 배열로 전환할 수 있습니다.
        let nodesArray = Array.prototype.slice.call(document.querySelectorAll(".div_li"));


nodelist 
    노드
    메서드
        getElementsByName   (live)
        querySelectorAll    (static)
            (참고 https://im-developer.tistory.com/110)
    유사배열(length 사용 가능)
    foreach 사용 가능
    
htmlcollection
    노드하위
    메서드
        getElementsByTagName    (live)
        getElementsByClassName  (live)
    유사배열(length 사용 가능)
    foreach 사용 못함
    
*/
let test02 = document.getElementsByName("test01");
let test03 = document.getElementsByTagName("p");
let test04 = document.getElementsByClassName("test01_class");
let test05 = document.querySelectorAll(".test01_class");
console.log(test02);    //nodelist
console.log(test03);    //htmlcollection
console.log(test04);    //htmlcollection
console.log(test05);    //nodelist

//nodelist forEach사용가능
test02.forEach(function(element, index){
    console.log("test02_index::::"+index+" ,  test02_textContent::::"+element.textContent );
});


console.log("test03.length::::"+test03.length);
// (htmlcollection으로 foreEach 사용 못함) 주석 풀고 실행 하면 에러발생 
// test03.forEach(function(element, index){
//         console.log(index+"   "+element.textContent );
// });
// 따라서 기본 for문 사용
for(let i=0; i<test03.length; i++){
    console.log("test03_index::::"+i+" ,  test03_textContent::::"+test03[i].textContent );
}



//nodelist 일때 속성 취득
console.log("nodelist_test02::::::"+test02[0].getAttribute("name"));
console.log("nodelist_test02::::::"+test02[0].textContent);

//htmlcollection 일때 속성 취득 (nodelist와 같음)
console.log("htmlcollection_test03::::::"+test03[0].getAttribute("name"));
console.log("htmlcollection_test03::::::"+test03[0].textContent);
</script>
</body>
</html>
</body>
</html>
